<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integrated Performance & Rehab Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Flex:opsz,wght@8..144,400;8..144,600;8..144,800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-main: #F8F7F4;
            --bg-card: #FFFFFF;
            --text-primary: #1A202C;
            --text-secondary: #4A5568;
            --accent-primary: #3B82F6;
            --accent-secondary: #10B981;
            --border-color: #E2E8F0;
        }
        body {
            font-family: 'Roboto Flex', sans-serif;
            background-color: var(--bg-main);
            color: var(--text-primary);
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
                max-height: 400px;
            }
        }
        .nav-link {
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            border: 2px solid transparent;
        }
        .nav-link.active {
            background-color: var(--accent-primary);
            color: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .nav-link:not(.active):hover {
            background-color: #EBF4FF;
            color: var(--accent-primary);
        }
        .day-selector-btn {
            flex: 1;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            text-align: center;
            border: 1px solid var(--border-color);
        }
        .day-selector-btn.active {
            background-color: var(--accent-secondary);
            color: white;
            border-color: var(--accent-secondary);
        }
         .day-selector-btn:not(.active):hover {
            background-color: #E6F8F2;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.875rem;
        }
        th {
            background-color: #F7FAFC;
            font-weight: 600;
            color: var(--text-secondary);
        }
        tbody tr:last-child td {
            border-bottom: none;
        }
        .llm-button {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            background-color: #667EEA;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
            margin-top: 1rem;
        }
        .llm-button:hover {
            background-color: #5A67D8;
        }
        .llm-button:disabled {
            background-color: #A0AEC0;
            cursor: not-allowed;
        }
        .llm-output {
            background-color: #F7FAFC;
            border-left: 4px solid #667EEA;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 1rem;
            font-size: 0.9rem;
            color: #2D3748;
        }
        .llm-disclaimer {
            font-size: 0.75rem;
            color: #718096;
            margin-top: 0.5rem;
            text-align: center;
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-extrabold text-gray-800">Integrated Training Dashboard</h1>
            <p class="text-lg text-gray-600 mt-2">Your 16-Week Science-Backed Program for Performance & Resilience</p>
        </header>

        <nav class="flex justify-center items-center bg-white p-2 rounded-full shadow-md mb-8 sticky top-4 z-10">
            <a href="#dashboard" class="nav-link active" data-tab="dashboard">Dashboard</a>
            <a href="#plan" class="nav-link" data-tab="plan">The Plan</a>
            <a href="#principles" class="nav-link" data-tab="principles">The Principles</a>
        </nav>

        <main>
            <div id="dashboard" class="tab-content">
                <section class="bg-white p-6 rounded-lg shadow-md mb-8">
                    <h2 class="text-2xl font-bold mb-4">Program Overview</h2>
                    <p class="text-gray-600 mb-6">This dashboard provides a clear, interactive guide to your 16-week journey. It integrates high-intensity training with crucial injury rehabilitation, built on a foundation of scientific principles. Use the navigation to explore your daily plan and the core concepts behind it.</p>
                     <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <div class="text-4xl font-extrabold text-blue-600">16</div>
                            <div class="font-semibold text-gray-700">Total Weeks</div>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <div class="text-4xl font-extrabold text-green-600">2</div>
                            <div class="font-semibold text-gray-700">Phases</div>
                        </div>
                        <div class="bg-yellow-50 p-4 rounded-lg">
                            <div class="text-4xl font-extrabold text-yellow-600">6</div>
                            <div class="font-semibold text-gray-700">Training Days/Wk</div>
                        </div>
                         <div class="bg-red-50 p-4 rounded-lg">
                            <div class="text-4xl font-extrabold text-red-600">3+</div>
                            <div class="font-semibold text-gray-700">Rehab Protocols</div>
                        </div>
                    </div>
                </section>
                
                <section class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-4 text-center">Phase Progression (RPE)</h3>
                        <p class="text-center text-gray-600 text-sm mb-4">This chart shows the planned increase in Rate of Perceived Exertion (RPE). The program deliberately builds from a foundational base (Phase 1) to peak intensity (Phase 2), ensuring safe and effective adaptation.</p>
                        <div class="chart-container">
                            <canvas id="rpeChart"></canvas>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-4 text-center">Tendon vs. Muscle Adaptation</h3>
                         <p class="text-center text-gray-600 text-sm mb-4">A core program principle is patience. Muscles adapt far more quickly than tendons. This chart highlights the physiological reality that demands a slow, consistent approach to loading for long-term resilience.</p>
                        <div class="chart-container">
                            <canvas id="adaptationChart"></canvas>
                        </div>
                    </div>
                </section>
            </div>

            <div id="plan" class="tab-content hidden">
                <section class="bg-white p-6 rounded-lg shadow-md mb-8">
                    <h2 class="text-2xl font-bold mb-4">Your Daily Workout</h2>
                    <p class="text-gray-600 mb-6">Select your current week to see the correct training block, then choose the day to view your specific exercises. This section is your daily action plan, translating the program's theory into practice.</p>
                    <div class="mb-6">
                        <label for="week-selector" class="block font-semibold mb-2">Current Week: <span id="week-label" class="font-bold text-blue-600">1</span></label>
                        <input type="range" id="week-selector" min="1" max="16" value="1" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        <div id="phase-indicator" class="text-center mt-2 font-semibold text-gray-700">Phase 1: Rehabilitation & Foundational Strength</div>
                    </div>

                    <div id="day-selector" class="flex flex-wrap gap-2 mb-6">
                        <button class="day-selector-btn active" data-day="mon">Mon</button>
                        <button class="day-selector-btn" data-day="tue">Tue</button>
                        <button class="day-selector-btn" data-day="wed">Wed</button>
                        <button class="day-selector-btn" data-day="thu">Thu</button>
                        <button class="day-selector-btn" data-day="fri">Fri</button>
                        <button class="day-selector-btn" data-day="sat">Sat</button>
                    </div>

                    <div id="workout-display" class="overflow-x-auto mb-4">
                    </div>

                    <div class="mt-6">
                        <h3 class="text-xl font-bold mb-2">✨ Smart Warm-up/Cool-down ✨</h3>
                        <p class="text-gray-600 mb-4">Get a tailored warm-up and cool-down routine for today's workout, generated by AI.</p>
                        <button id="getWorkoutSuggestionBtn" class="llm-button">Generate Routines</button>
                        <div id="workoutSuggestionOutput" class="llm-output hidden"></div>
                        <p class="llm-disclaimer">AI-generated content is for informational purposes only and should not replace professional advice.</p>
                    </div>
                </section>
            </div>

            <div id="principles" class="tab-content hidden">
                <section class="bg-white p-6 rounded-lg shadow-md mb-8">
                    <h2 class="text-2xl font-bold mb-4">Foundational Principles</h2>
                     <p class="text-gray-600 mb-6">Understanding the "why" behind your training is crucial for success and long-term health. This section is your reference library, containing the core scientific principles from the report on pain management, recovery, and the mind-body connection.</p>

                    <div class="space-y-6">
                        <div>
                            <h3 class="text-xl font-bold mb-2">Pain vs. Aggravation</h3>
                            <p class="text-gray-600">A key skill is distinguishing "beneficial pain" from "harmful aggravation." An exercise might cause temporary, manageable discomfort but lead to improved strength over time—this is productive. An exercise that consistently worsens pain or performance is aggravating and must be modified. The goal is improved function, not zero pain.</p>
                        </div>
                         <div>
                            <h3 class="text-xl font-bold mb-2">Rehabilitation Flow</h3>
                            <div class="flex flex-col md:flex-row items-center justify-around space-y-4 md:space-y-0 md:space-x-4 p-4 bg-gray-50 rounded-lg">
                                <div class="text-center"><div class="text-2xl font-bold text-blue-600">1</div><p class="font-semibold mt-1">Pain Management</p><p class="text-xs text-gray-500">Isometrics & Heat</p></div>
                                <div class="text-2xl font-bold text-gray-300 transform rotate-90 md:rotate-0">→</div>
                                <div class="text-center"><div class="text-2xl font-bold text-blue-600">2</div><p class="font-semibold mt-1">Build Strength</p><p class="text-xs text-gray-500">Controlled Eccentrics</p></div>
                                <div class="text-2xl font-bold text-gray-300 transform rotate-90 md:rotate-0">→</div>
                                <div class="text-center"><div class="text-2xl font-bold text-blue-600">3</div><p class="font-semibold mt-1">Improve Function</p><p class="text-xs text-gray-500">Compound Movements</p></div>
                                 <div class="text-2xl font-bold text-gray-300 transform rotate-90 md:rotate-0">→</div>
                                <div class="text-center"><div class="text-2xl font-bold text-blue-600">4</div><p class="font-semibold mt-1">Increase Power</p><p class="text-xs text-gray-500">Explosive Reps</p></div>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold mb-2">The Body-Mind Connection</h3>
                            <p class="text-gray-600">Pain is not just physical; it's an experience created by the brain. High stress and poor sleep can amplify pain. Understanding that "hurt doesn't equal harm" is a core concept of Pain Neuroscience Education (PNE). This allows you to train intelligently through minor discomfort, which is essential for desensitizing the nervous system and promoting healing.</p>
                        </div>
                         <div>
                            <h3 class="text-xl font-bold mb-2">Progressive Overload & Recovery</h3>
                            <p class="text-gray-600">To get stronger, you must gradually increase the demand on your body. However, with pre-existing injuries, this must be done cautiously. This program uses a controlled tempo (e.g., "3010") to maximize time under tension and ensure mindful movement. Remember, adequate recovery is when adaptations occur—honor your rest days.</p>
                        </div>

                        <div class="mt-8">
                            <h3 class="text-xl font-bold mb-2">✨ Injury Insight & Relief ✨</h3>
                            <p class="text-gray-600 mb-4">Describe your specific pain or symptoms (e.g., "sharp pain in outer elbow when pressing") to get general, non-medical advice on management.</p>
                            <textarea id="userPainDescription" class="w-full p-3 border border-gray-300 rounded-lg mb-4 focus:ring-blue-500 focus:border-blue-500" rows="4" placeholder="e.g., 'Dull ache in tricep tendon after push-ups.'"></textarea>
                            <button id="getInjuryInsightBtn" class="llm-button">Get Insight</button>
                            <div id="injuryInsightOutput" class="llm-output hidden"></div>
                            <p class="llm-disclaimer">AI-generated content is for informational purposes only and should not replace professional medical advice. Consult a healthcare professional for diagnosis and treatment.</p>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

<script>
const workoutData = {
    phase1_w1_4: {
        mon: `
            <h4 class="font-bold text-lg mb-2">Full Body Strength</h4>
            <table>
                <thead><tr><th>Exercise</th><th>Sets</th><th>Reps</th><th>RPE</th><th>Tempo</th></tr></thead>
                <tbody>
                    <tr><td>1. Goblet Squat</td><td>3</td><td>12-15</td><td>6-7</td><td>3010</td></tr>
                    <tr><td>2. Dumbbell Bench Press</td><td>3</td><td>10-12</td><td>6-7</td><td>3010</td></tr>
                    <tr><td>3. Lat Pulldown</td><td>3</td><td>10-12</td><td>6-7</td><td>3010</td></tr>
                    <tr><td>4. Dumbbell RDL</td><td>3</td><td>10-12</td><td>6-7</td><td>3010</td></tr>
                    <tr><td>5. Seated DB OHP</td><td>3</td><td>10-12</td><td>6-7</td><td>3010</td></tr>
                    <tr><td>6. Bent-Over DB Row</td><td>3</td><td>10-12</td><td>6-7</td><td>3010</td></tr>
                    <tr><td>7. Leg Press</td><td>3</td><td>12-15</td><td>6-7</td><td>2010</td></tr>
                </tbody>
            </table>`,
        wed: `
            <h4 class="font-bold text-lg mb-2">Full Body Strength</h4>
            <table>
                <thead><tr><th>Exercise</th><th>Sets</th><th>Reps</th><th>RPE</th><th>Tempo</th></tr></thead>
                <tbody>
                    <tr><td>1. Dumbbell Lunges</td><td>3</td><td>10-12/leg</td><td>6-7</td><td>3010</td></tr>
                    <tr><td>2. Incline DB Press</td><td>3</td><td>10-12</td><td>6-7</td><td>3010</td></tr>
                    <tr><td>3. Cable Seated Row</td><td>3</td><td>10-12</td><td>6-7</td><td>3010</td></tr>
                    <tr><td>4. Weighted Glute Bridge</td><td>3</td><td>12-15</td><td>6-7</td><td>2010</td></tr>
                    <tr><td>5. Machine Shoulder Press</td><td>3</td><td>10-12</td><td>6-7</td><td>3010</td></tr>
                    <tr><td>6. Cable Face Pulls</td><td>3</td><td>15-20</td><td>6-7</td><td>2010</td></tr>
                    <tr><td>7. Standing Calf Raises</td><td>3</td><td>15-20</td><td>6-7</td><td>2010</td></tr>
                </tbody>
            </table>`,
        fri: `
            <h4 class="font-bold text-lg mb-2">Full Body Strength</h4>
            <table>
                <thead><tr><th>Exercise</th><th>Sets</th><th>Reps</th><th>RPE</th><th>Tempo</th></tr></thead>
                <tbody>
                    <tr><td>1. Bodyweight Squat</td><td>3</td><td>15-20</td><td>6-7</td><td>3010</td></tr>
                    <tr><td>2. Push-ups (Normal/Incline)</td><td>3</td><td>AMRAP</td><td>6-7</td><td>2010</td></tr>
                    <tr><td>3. Australian Pull-ups</td><td>3</td><td>10-15</td><td>6-7</td><td>3010</td></tr>
                    <tr><td>4. Leg Extension</td><td>3</td><td>12-15</td><td>6-7</td><td>2010</td></tr>
                    <tr><td>5. Lateral Raises</td><td>3</td><td>15-20</td><td>6-7</td><td>2010</td></tr>
                    <tr><td>6. Triceps Pushdowns</td><td>3</td><td>12-15</td><td>6-7</td><td>2010</td></tr>
                    <tr><td>7. Bicep Curls</td><td>3</td><td>12-15</td><td>6-7</td><td>2010</td></tr>
                </tbody>
            </table>`,
        tue: `
            <h4 class="font-bold text-lg mb-2">Cardio & Specialized Training</h4>
            <table>
                <thead><tr><th>Category</th><th>Exercise</th><th>Sets</th><th>Reps/Time</th><th>RPE</th></tr></thead>
                <tbody>
                    <tr><td>Tendon Rehab</td><td>See Table 3</td><td>2-3</td><td>15-20r / 30-60s</td><td>5-7</td></tr>
                    <tr><td>Cardio (Football)</td><td>Shuttle Runs</td><td>5-8</td><td>1-2 rounds</td><td>6-7</td></tr>
                    <tr><td>Calisthenics/Core</td><td>Plank Holds</td><td>3</td><td>30-60s</td><td>N/A</td></tr>
                    <tr><td>Calisthenics/Core</td><td>Scapula Push-ups</td><td>3</td><td>10-15</td><td>6-7</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>DB Wrist Curls</td><td>2</td><td>12-15</td><td>6-7</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>Plate Neck Curl</td><td>2</td><td>15-20</td><td>6-7</td></tr>
                </tbody>
            </table>`,
        thu: `
            <h4 class="font-bold text-lg mb-2">Cardio & Specialized Training</h4>
            <table>
                <thead><tr><th>Category</th><th>Exercise</th><th>Sets</th><th>Reps/Time</th><th>RPE</th></tr></thead>
                <tbody>
                    <tr><td>Tendon Rehab</td><td>See Table 3</td><td>2-3</td><td>15-20r / 30-60s</td><td>5-7</td></tr>
                    <tr><td>Cardio (Cricket)</td><td>100m Intervals</td><td>5-8</td><td>100m run + 30s rest</td><td>6-7</td></tr>
                    <tr><td>Calisthenics/Core</td><td>Negative Push-ups</td><td>3</td><td>5-8</td><td>6-7</td></tr>
                    <tr><td>Calisthenics/Core</td><td>Dead Bugs</td><td>3</td><td>10-12/side</td><td>6-7</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>DB Wrist Extensions</td><td>2</td><td>12-15</td><td>6-7</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>Upright Rows</td><td>2</td><td>10-12</td><td>6-7</td></tr>
                </tbody>
            </table>`,
        sat: `
            <h4 class="font-bold text-lg mb-2">Cardio & Specialized Training</h4>
            <table>
                <thead><tr><th>Category</th><th>Exercise</th><th>Sets</th><th>Reps/Time</th><th>RPE</th></tr></thead>
                <tbody>
                    <tr><td>Tendon Rehab</td><td>See Table 3</td><td>2-3</td><td>15-20r / 30-60s</td><td>5-7</td></tr>
                    <tr><td>Cardio (NBA)</td><td>Lane Agility Drill</td><td>5-8</td><td>1-2 rounds</td><td>6-7</td></tr>
                    <tr><td>Boxing Bag</td><td>Straights & Jabs</td><td>3</td><td>3 mins</td><td>6-7</td></tr>
                    <tr><td>Arm Wrestling</td><td>One-Arm Bicep Curl</td><td>2</td><td>8-10/arm</td><td>6-7</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>Plate Pinches</td><td>2</td><td>Max Hold</td><td>10</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>Plate Neck Extension</td><td>2</td><td>15-20</td><td>6-7</td></tr>
                </tbody>
            </table>`
    },
    phase1_w5_8: {
        mon: `
            <h4 class="font-bold text-lg mb-2">Full Body Strength</h4>
            <table>
                <thead><tr><th>Exercise</th><th>Sets</th><th>Reps</th><th>RPE</th><th>Tempo</th></tr></thead>
                <tbody>
                    <tr><td>1. Goblet Squat</td><td>4</td><td>10-12</td><td>7-8</td><td>3010</td></tr>
                    <tr><td>2. Dumbbell Bench Press</td><td>4</td><td>8-10</td><td>7-8</td><td>3010</td></tr>
                    <tr><td>3. Lat Pulldown</td><td>4</td><td>8-10</td><td>7-8</td><td>3010</td></tr>
                    <tr><td>4. Dumbbell RDL</td><td>4</td><td>8-10</td><td>7-8</td><td>3010</td></tr>
                    <tr><td>5. Seated DB OHP</td><td>4</td><td>8-10</td><td>7-8</td><td>3010</td></tr>
                    <tr><td>6. Bent-Over DB Row</td><td>4</td><td>8-10</td><td>7-8</td><td>3010</td></tr>
                    <tr><td>7. Leg Press</td><td>4</td><td>10-12</td><td>7-8</td><td>2010</td></tr>
                </tbody>
            </table>`,
        wed: `
            <h4 class="font-bold text-lg mb-2">Full Body Strength</h4>
            <table>
                <thead><tr><th>Exercise</th><th>Sets</th><th>Reps</th><th>RPE</th><th>Tempo</th></tr></thead>
                <tbody>
                    <tr><td>1. Dumbbell Lunges</td><td>4</td><td>8-10/leg</td><td>7-8</td><td>3010</td></tr>
                    <tr><td>2. Incline DB Press</td><td>4</td><td>8-10</td><td>7-8</td><td>3010</td></tr>
                    <tr><td>3. Cable Seated Row</td><td>4</td><td>8-10</td><td>7-8</td><td>3010</td></tr>
                    <tr><td>4. Weighted Glute Bridge</td><td>4</td><td>10-12</td><td>7-8</td><td>2010</td></tr>
                    <tr><td>5. Machine Shoulder Press</td><td>4</td><td>8-10</td><td>7-8</td><td>3010</td></tr>
                    <tr><td>6. Cable Face Pulls</td><td>4</td><td>12-15</td><td>7-8</td><td>2010</td></tr>
                    <tr><td>7. Standing Calf Raises</td><td>4</td><td>15-20</td><td>7-8</td><td>2010</td></tr>
                </tbody>
            </table>`,
        fri: `
            <h4 class="font-bold text-lg mb-2">Full Body Strength</h4>
            <table>
                <thead><tr><th>Exercise</th><th>Sets</th><th>Reps</th><th>RPE</th><th>Tempo</th></tr></thead>
                <tbody>
                    <tr><td>1. Bodyweight Squat</td><td>4</td><td>15-20</td><td>7-8</td><td>3010</td></tr>
                    <tr><td>2. Push-ups (Normal/Decline)</td><td>4</td><td>AMRAP</td><td>7-8</td><td>2010</td></tr>
                    <tr><td>3. Australian Pull-ups</td><td>4</td><td>10-15</td><td>7-8</td><td>3010</td></tr>
                    <tr><td>4. Leg Extension</td><td>4</td><td>10-12</td><td>7-8</td><td>2010</td></tr>
                    <tr><td>5. Lateral Raises</td><td>4</td><td>12-15</td><td>7-8</td><td>2010</td></tr>
                    <tr><td>6. Triceps Pushdowns</td><td>4</td><td>10-12</td><td>7-8</td><td>2010</td></tr>
                    <tr><td>7. Bicep Curls</td><td>4</td><td>10-12</td><td>7-8</td><td>2010</td></tr>
                </tbody>
            </table>`,
        tue: `
            <h4 class="font-bold text-lg mb-2">Cardio & Specialized Training</h4>
            <table>
                <thead><tr><th>Category</th><th>Exercise</th><th>Sets</th><th>Reps/Time</th><th>RPE</th></tr></thead>
                <tbody>
                    <tr><td>Tendon Rehab</td><td>See Table 3</td><td>3</td><td>15-20r / 45-60s</td><td>6-8</td></tr>
                    <tr><td>Cardio (Football)</td><td>Box-to-Box Runs</td><td>5-8</td><td>1-2 rounds</td><td>7-8</td></tr>
                    <tr><td>Calisthenics/Core</td><td>Scapula Push-ups</td><td>4</td><td>10-15</td><td>7-8</td></tr>
                    <tr><td>Calisthenics/Core</td><td>Normal Push-ups</td><td>4</td><td>AMRAP</td><td>7-8</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>DB Wrist Extensions</td><td>3</td><td>12-15</td><td>7-8</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>Monkey Shrugs</td><td>3</td><td>12-15</td><td>7-8</td></tr>
                </tbody>
            </table>`,
        thu: `
            <h4 class="font-bold text-lg mb-2">Cardio & Specialized Training</h4>
            <table>
                <thead><tr><th>Category</th><th>Exercise</th><th>Sets</th><th>Reps/Time</th><th>RPE</th></tr></thead>
                <tbody>
                    <tr><td>Tendon Rehab</td><td>See Table 3</td><td>3</td><td>15-20r / 45-60s</td><td>6-8</td></tr>
                    <tr><td>Cardio (Cricket)</td><td>5m/3m Intervals</td><td>3-5</td><td>5m run + 3m walk</td><td>7-8</td></tr>
                    <tr><td>Calisthenics/Core</td><td>Negative Push-ups</td><td>4</td><td>5-8</td><td>7-8</td></tr>
                    <tr><td>Calisthenics/Core</td><td>Hanging Leg Raises</td><td>3</td><td>10-12</td><td>7-8</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>Wrist Roller</td><td>2</td><td>Max Reps</td><td>8-9</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>Plate Neck Extension</td><td>3</td><td>15-20</td><td>7-8</td></tr>
                </tbody>
            </table>`,
        sat: `
            <h4 class="font-bold text-lg mb-2">Cardio & Specialized Training</h4>
            <table>
                <thead><tr><th>Category</th><th>Exercise</th><th>Sets</th><th>Reps/Time</th><th>RPE</th></tr></thead>
                <tbody>
                    <tr><td>Tendon Rehab</td><td>See Table 3</td><td>3</td><td>15-20r / 45-60s</td><td>6-8</td></tr>
                    <tr><td>Cardio (NBA)</td><td>Dribble Suicide</td><td>5-8</td><td>1-2 rounds</td><td>7-8</td></tr>
                    <tr><td>Boxing Bag</td><td>Jab-Cross Combos</td><td>3</td><td>3 mins</td><td>7-8</td></tr>
                    <tr><td>Arm Wrestling</td><td>Cable Triceps Ext</td><td>3</td><td>8-10/arm</td><td>7-8</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>Farmer's Walks</td><td>2</td><td>Max Strides</td><td>10</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>Plate Lateral Neck Curl</td><td>2</td><td>12-15</td><td>7-8</td></tr>
                </tbody>
            </table>`
    },
    phase2_w9_12: {
        mon: `
            <h4 class="font-bold text-lg mb-2">Full Body Strength</h4>
            <table>
                <thead><tr><th>Exercise</th><th>Sets</th><th>Reps</th><th>RPE</th><th>Tempo</th></tr></thead>
                <tbody>
                    <tr><td>1. Barbell Back Squat</td><td>4</td><td>6-8</td><td>8-9</td><td>3010</td></tr>
                    <tr><td>2. Barbell Bench Press</td><td>4</td><td>6-8</td><td>8-9</td><td>3010</td></tr>
                    <tr><td>3. Weighted Pull-ups</td><td>4</td><td>6-8</td><td>8-9</td><td>3010</td></tr>
                    <tr><td>4. Barbell RDL</td><td>4</td><td>8-10</td><td>8-9</td><td>3010</td></tr>
                    <tr><td>5. Barbell OHP</td><td>4</td><td>6-8</td><td>8-9</td><td>3010</td></tr>
                    <tr><td>6. T-Bar Row</td><td>4</td><td>8-10</td><td>8-9</td><td>3010</td></tr>
                    <tr><td>7. Calf Raises</td><td>3</td><td>15-20</td><td>8-9</td><td>2010</td></tr>
                </tbody>
            </table>`,
        wed: `
            <h4 class="font-bold text-lg mb-2">Full Body Strength</h4>
            <table>
                <thead><tr><th>Exercise</th><th>Sets</th><th>Reps</th><th>RPE</th><th>Tempo</th></tr></thead>
                <tbody>
                    <tr><td>1. Barbell Front Squat</td><td>4</td><td>6-8</td><td>8-9</td><td>3010</td></tr>
                    <tr><td>2. Weighted Dips</td><td>4</td><td>6-8</td><td>8-9</td><td>3010</td></tr>
                    <tr><td>3. Barbell Rows</td><td>4</td><td>6-8</td><td>8-9</td><td>3010</td></tr>
                    <tr><td>4. Glute Ham Raise</td><td>3</td><td>8-10</td><td>8-9</td><td>3010</td></tr>
                    <tr><td>5. DB Incline Press</td><td>4</td><td>8-10</td><td>8-9</td><td>3010</td></tr>
                    <tr><td>6. Close-Grip Bench</td><td>3</td><td>8-10</td><td>8-9</td><td>3010</td></tr>
                    <tr><td>7. Seated Calf Raises</td><td>3</td><td>15-20</td><td>8-9</td><td>2010</td></tr>
                </tbody>
            </table>`,
        fri: `
            <h4 class="font-bold text-lg mb-2">Full Body Strength</h4>
            <table>
                <thead><tr><th>Exercise</th><th>Sets</th><th>Rpes</th><th>RPE</th><th>Tempo</th></tr></thead>
                <tbody>
                    <tr><td>1. Deadlift</td><td>3</td><td>3-5</td><td>8-9</td><td>2010</td></tr>
                    <tr><td>2. Weighted Push-ups</td><td>4</td><td>8-12</td><td>8-9</td><td>2010</td></tr>
                    <tr><td>3. Machine Pulldown</td><td>4</td><td>8-10</td><td>8-9</td><td>3010</td></tr>
                    <tr><td>4. Leg Extension</td><td>3</td><td>10-12</td><td>8-9</td><td>2010</td></tr>
                    <tr><td>5. Lateral Raises</td><td>3</td><td>12-15</td><td>8-9</td><td>2010</td></tr>
                    <tr><td>6. Overhead Triceps Ext</td><td>3</td><td>10-12</td><td>8-9</td><td>3010</td></tr>
                    <tr><td>7. Hammer Curls</td><td>3</td><td>10-12</td><td>8-9</td><td>2010</td></tr>
                </tbody>
            </table>`,
        tue: `
            <h4 class="font-bold text-lg mb-2">Cardio & Specialized Training</h4>
            <table>
                <thead><tr><th>Category</th><th>Exercise</th><th>Sets</th><th>Reps/Time</th><th>RPE</th></tr></thead>
                <tbody>
                    <tr><td>Tendon Rehab</td><td>Functional Strength</td><td>3</td><td>15-20r / 60s</td><td>6-8</td></tr>
                    <tr><td>Cardio (Football)</td><td>Repeated Sprints</td><td>5-8</td><td>Short bursts</td><td>7-9</td></tr>
                    <tr><td>Calisthenics/Core</td><td>Diamond Push-ups</td><td>3</td><td>8-12</td><td>7-8</td></tr>
                    <tr><td>Calisthenics/Core</td><td>Hanging Leg Raises</td><td>3</td><td>10-15</td><td>7-8</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>Cable Wrist Curls</td><td>3</td><td>12-15</td><td>7-8</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>Harness Neck Ext</td><td>3</td><td>8-10</td><td>8-9</td></tr>
                </tbody>
            </table>`,
        thu: `
            <h4 class="font-bold text-lg mb-2">Cardio & Specialized Training</h4>
            <table>
                <thead><tr><th>Category</th><th>Exercise</th><th>Sets</th><th>Reps/Time</th><th>RPE</th></tr></thead>
                <tbody>
                    <tr><td>Tendon Rehab</td><td>Functional Strength</td><td>3</td><td>15-20r / 60s</td><td>6-8</td></tr>
                    <tr><td>Cardio (Cricket)</td><td>High Resistance Sprints</td><td>5-8</td><td>10-12s max</td><td>8-9</td></tr>
                    <tr><td>Calisthenics/Core</td><td>Australian Pull-ups</td><td>3</td><td>8-12</td><td>7-8</td></tr>
                    <tr><td>Calisthenics/Core</td><td>L-Sit Flutters</td><td>3</td><td>20-30s</td><td>N/A</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>Reverse Grip Curls</td><td>3</td><td>12-15</td><td>7-8</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>Wide Grip Shrugs</td><td>3</td><td>15-20</td><td>7-8</td></tr>
                </tbody>
            </table>`,
        sat: `
            <h4 class="font-bold text-lg mb-2">Cardio & Specialized Training</h4>
            <table>
                <thead><tr><th>Category</th><th>Exercise</th><th>Sets</th><th>Reps/Time</th><th>RPE</th></tr></thead>
                <tbody>
                    <tr><td>Tendon Rehab</td><td>Functional Strength</td><td>3</td><td>15-20r / 60s</td><td>7-9</td></tr>
                    <tr><td>Cardio (NBA)</td><td>Full-Court Layups</td><td>5-8</td><td>1-2 rounds</td><td>8-10</td></tr>
                    <tr><td>Boxing Bag</td><td>Power Punch Drill</td><td>3</td><td>3 mins</td><td>7-9</td></tr>
                    <tr><td>Arm Wrestling</td><td>Pull-ups</td><td>3</td><td>AMRAP</td><td>8-9</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>Heavy Barbell Holds</td><td>2</td><td>30s</td><td>9-10</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>Rope Facepulls</td><td>2</td><td>15-20</td><td>7-8</td></tr>
                </tbody>
            </table>`
    },
    phase2_w13_16: {
        mon: `
            <h4 class="font-bold text-lg mb-2">Full Body Strength</h4>
            <table>
                <thead><tr><th>Exercise</th><th>Sets</th><th>Reps</th><th>RPE</th><th>Tempo</th></tr></thead>
                <tbody>
                    <tr><td>1. Barbell Back Squat</td><td>5</td><td>5-7</td><td>9-10</td><td>30X0</td></tr>
                    <tr><td>2. Barbell Bench Press</td><td>5</td><td>5-7</td><td>9-10</td><td>30X0</td></tr>
                    <tr><td>3. Weighted Pull-ups</td><td>5</td><td>5-7</td><td>9-10</td><td>30X0</td></tr>
                    <tr><td>4. Barbell RDL</td><td>4</td><td>6-8</td><td>9-10</td><td>30X0</td></tr>
                    <tr><td>5. Barbell OHP</td><td>4</td><td>5-7</td><td>9-10</td><td>30X0</td></tr>
                    <tr><td>6. T-Bar Row</td><td>4</td><td>6-8</td><td>9-10</td><td>30X0</td></tr>
                    <tr><td>7. Calf Raises</td><td>4</td><td>12-15</td><td>9-10</td><td>20X0</td></tr>
                </tbody>
            </table>`,
        wed: `
            <h4 class="font-bold text-lg mb-2">Full Body Strength</h4>
            <table>
                <thead><tr><th>Exercise</th><th>Sets</th><th>Reps</th><th>RPE</th><th>Tempo</th></tr></thead>
                <tbody>
                    <tr><td>1. Barbell Front Squat</td><td>5</td><td>5-7</td><td>9-10</td><td>30X0</td></tr>
                    <tr><td>2. Weighted Dips</td><td>5</td><td>5-7</td><td>9-10</td><td>30X0</td></tr>
                    <tr><td>3. Barbell Rows</td><td>5</td><td>5-7</td><td>9-10</td><td>30X0</td></tr>
                    <tr><td>4. Glute Ham Raise</td><td>4</td><td>6-8</td><td>9-10</td><td>30X0</td></tr>
                    <tr><td>5. DB Incline Press</td><td>4</td><td>6-8</td><td>9-10</td><td>30X0</td></tr>
                    <tr><td>6. Close-Grip Bench</td><td>4</td><td>6-8</td><td>9-10</td><td>30X0</td></tr>
                    <tr><td>7. Seated Calf Raises</td><td>4</td><td>12-15</td><td>9-10</td><td>20X0</td></tr>
                </tbody>
            </table>`,
        fri: `
            <h4 class="font-bold text-lg mb-2">Full Body Strength</h4>
            <table>
                <thead><tr><th>Exercise</th><th>Sets</th><th>Rpes</th><th>RPE</th><th>Tempo</th></tr></thead>
                <tbody>
                    <tr><td>1. Deadlift</td><td>3</td><td>1-3</td><td>9-10</td><td>20X0</td></tr>
                    <tr><td>2. Weighted Push-ups</td><td>5</td><td>8-12</td><td>9-10</td><td>20X0</td></tr>
                    <tr><td>3. Machine Pulldown</td><td>5</td><td>8-10</td><td>9-10</td><td>30X0</td></tr>
                    <tr><td>4. Leg Extension</td><td>4</td><td>8-10</td><td>9-10</td><td>20X0</td></tr>
                    <tr><td>5. Lateral Raises</td><td>4</td><td>10-12</td><td>9-10</td><td>20X0</td></tr>
                    <tr><td>6. Overhead Triceps Ext</td><td>4</td><td>8-10</td><td>9-10</td><td>30X0</td></tr>
                    <tr><td>7. Hammer Curls</td><td>4</td><td>8-10</td><td>9-10</td><td>20X0</td></tr>
                </tbody>
            </table>`,
        tue: `
            <h4 class="font-bold text-lg mb-2">Cardio & Specialized Training</h4>
            <table>
                <thead><tr><th>Category</th><th>Exercise</th><th>Sets</th><th>Reps/Time</th><th>RPE</th></tr></thead>
                <tbody>
                    <tr><td>Tendon Rehab</td><td>Power/Functional</td><td>3</td><td>10-15r / 60s</td><td>7-9</td></tr>
                    <tr><td>Cardio (Football)</td><td>Game Simulations</td><td>5-8</td><td>1-2 rounds</td><td>8-10</td></tr>
                    <tr><td>Calisthenics/Core</td><td>Archer Push-ups</td><td>3</td><td>5-8/side</td><td>8-9</td></tr>
                    <tr><td>Calisthenics/Core</td><td>Weighted Leg Raises</td><td>3</td><td>8-12</td><td>8-9</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>Heavy DB Wrist Curls</td><td>3</td><td>10-12</td><td>8-9</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>Heavy Plate Neck Curl</td><td>3</td><td>10-12</td><td>8-9</td></tr>
                </tbody>
            </table>`,
        thu: `
            <h4 class="font-bold text-lg mb-2">Cardio & Specialized Training</h4>
            <table>
                <thead><tr><th>Category</th><th>Exercise</th><th>Sets</th><th>Reps/Time</th><th>RPE</th></tr></thead>
                <tbody>
                    <tr><td>Tendon Rehab</td><td>Power/Functional</td><td>3</td><td>10-15r / 60s</td><td>7-9</td></tr>
                    <tr><td>Cardio (Cricket)</td><td>Strongman Carries</td><td>3-5</td><td>Max Distance</td><td>9-10</td></tr>
                    <tr><td>Calisthenics/Core</td><td>Negative Pull-ups</td><td>3</td><td>3-5 (5-6s)</td><td>8-9</td></tr>
                    <tr><td>Calisthenics/Core</td><td>Weighted Ab Rollout</td><td>3</td><td>6-10</td><td>8-9</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>Heavy Plate Pinches</td><td>3</td><td>Max Hold</td><td>10</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>Heavy Plate Neck Ext</td><td>3</td><td>10-12</td><td>8-9</td></tr>
                </tbody>
            </table>`,
        sat: `
            <h4 class="font-bold text-lg mb-2">Cardio & Specialized Training</h4>
            <table>
                <thead><tr><th>Category</th><th>Exercise</th><th>Sets</th><th>Reps/Time</th><th>RPE</th></tr></thead>
                <tbody>
                    <tr><td>Tendon Rehab</td><td>Power/Functional</td><td>3</td><td>10-15r / 60s</td><td>7-9</td></tr>
                    <tr><td>Cardio (NBA)</td><td>Baseline Cuts & Shots</td><td>5-8</td><td>5x/side</td><td>8-10</td></tr>
                    <tr><td>Boxing Bag</td><td>Master & Mauler Drill</td><td>3-5</td><td>3 mins</td><td>9-10</td></tr>
                    <tr><td>Arm Wrestling</td><td>Heavy Barbell Rows</td><td>3</td><td>6-8</td><td>8-9</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>Heavy Farmer's Walks</td><td>3</td><td>Max Strides</td><td>10</td></tr>
                    <tr><td>Forearms/Neck/Traps</td><td>Rope Lying Shrugs</td><td>3</td><td>15-20</td><td>8-9</td></tr>
                </tbody>
            </table>`
    }
};

document.addEventListener('DOMContentLoaded', () => {
    const tabs = document.querySelectorAll('.nav-link');
    const tabContents = document.querySelectorAll('.tab-content');
    const weekSelector = document.getElementById('week-selector');
    const weekLabel = document.getElementById('week-label');
    const phaseIndicator = document.getElementById('phase-indicator');
    const daySelector = document.getElementById('day-selector');
    const workoutDisplay = document.getElementById('workout-display');

    const getInjuryInsightBtn = document.getElementById('getInjuryInsightBtn');
    const userPainDescription = document.getElementById('userPainDescription');
    const injuryInsightOutput = document.getElementById('injuryInsightOutput');

    const getWorkoutSuggestionBtn = document.getElementById('getWorkoutSuggestionBtn');
    const workoutSuggestionOutput = document.getElementById('workoutSuggestionOutput');

    let state = {
        week: 1,
        day: 'mon',
        tab: 'dashboard'
    };

    function updateNav(targetTab) {
        tabs.forEach(tab => {
            tab.classList.toggle('active', tab.dataset.tab === targetTab);
        });
        tabContents.forEach(content => {
            content.classList.toggle('hidden', content.id !== targetTab);
        });
        state.tab = targetTab;
    }

    tabs.forEach(tab => {
        tab.addEventListener('click', (e) => {
            e.preventDefault();
            const targetTab = e.target.dataset.tab;
            updateNav(targetTab);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    });

    function renderWorkout() {
        const week = state.week;
        const day = state.day;
        let workoutBlock;

        if (week <= 4) workoutBlock = workoutData.phase1_w1_4;
        else if (week <= 8) workoutBlock = workoutData.phase1_w5_8;
        else if (week <= 12) workoutBlock = workoutData.phase2_w9_12;
        else workoutBlock = workoutData.phase2_w13_16;

        workoutDisplay.innerHTML = workoutBlock[day] || '<p>Select a day to see your workout.</p>';
        
        weekLabel.textContent = week;
        if (week <= 8) {
            phaseIndicator.textContent = "Phase 1: Rehabilitation & Foundational Strength";
        } else {
            phaseIndicator.textContent = "Phase 2: Performance Enhancement & Resilience";
        }
    }

    weekSelector.addEventListener('input', (e) => {
        state.week = parseInt(e.target.value);
        renderWorkout();
    });

    daySelector.addEventListener('click', (e) => {
        if (e.target.classList.contains('day-selector-btn')) {
            daySelector.querySelector('.active').classList.remove('active');
            e.target.classList.add('active');
            state.day = e.target.dataset.day;
            renderWorkout();
        }
    });

    const tooltipTitleCallback = (tooltipItems) => {
        const item = tooltipItems[0];
        let label = item.chart.data.labels[item.dataIndex];
        return Array.isArray(label) ? label.join(' ') : label;
    };
    
    const commonChartOptions = {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: {
                position: 'bottom',
                labels: { font: { size: 12 } }
            },
            tooltip: {
                callbacks: { title: tooltipTitleCallback }
            }
        },
        scales: {
            x: { grid: { display: false } },
            y: { grid: { color: '#E2E8F0' } }
        }
    };
    
    const rpeCtx = document.getElementById('rpeChart')?.getContext('2d');
    if (rpeCtx) {
        new Chart(rpeCtx, {
            type: 'line',
            data: {
                labels: ['Wk 1', 'Wk 4', 'Wk 8', 'Wk 9', 'Wk 12', 'Wk 16'],
                datasets: [{
                    label: 'RPE Range',
                    data: [6.5, 6.5, 7.5, 8.5, 8.5, 9.5],
                    borderColor: 'rgba(59, 130, 246, 1)',
                    backgroundColor: 'rgba(59, 130, 246, 0.1)',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: { ...commonChartOptions, scales: { y: { min: 5, max: 10 } } }
        });
    }

    const adaptationCtx = document.getElementById('adaptationChart')?.getContext('2d');
    if (adaptationCtx) {
        new Chart(adaptationCtx, {
            type: 'bar',
            data: {
                labels: ['Muscle', 'Tendon'],
                datasets: [{
                    label: 'Approx. Adaptation Time (Days)',
                    data: [8, 60],
                    backgroundColor: ['rgba(16, 185, 129, 0.7)', 'rgba(245, 158, 11, 0.7)'],
                    borderColor: ['rgba(16, 185, 129, 1)', 'rgba(245, 158, 11, 1)'],
                    borderWidth: 1
                }]
            },
            options: { ...commonChartOptions, indexAxis: 'y' }
        });
    }

    // LLM Integration for Injury Insight & Relief
    getInjuryInsightBtn.addEventListener('click', async () => {
        const userPain = userPainDescription.value.trim();
        if (!userPain) {
            injuryInsightOutput.innerHTML = '<p class="text-red-500">Please describe your pain or symptoms.</p>';
            injuryInsightOutput.classList.remove('hidden');
            return;
        }

        getInjuryInsightBtn.disabled = true;
        injuryInsightOutput.classList.remove('hidden');
        injuryInsightOutput.innerHTML = '<p class="text-center text-gray-500">Loading insight...</p>';

        try {
            const prompt = `I have tricep tendonitis, golfer/tennis elbow, and knee MCL/ACL pain. My current symptoms are: "${userPain}". Provide general, non-medical advice on managing these symptoms, suggesting stretches, or modifications within a structured fitness program. Focus on actionable steps. Keep it concise, around 100-150 words.`;
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
            const result = await response.json();

            if (result.candidates && result.candidates.length > 0 &&
                result.candidates[0].content && result.candidates[0].content.parts &&
                result.candidates[0].content.parts.length > 0) {
                const text = result.candidates[0].content.parts[0].text;
                injuryInsightOutput.innerHTML = `<p>${text}</p>`;
            } else {
                injuryInsightOutput.innerHTML = '<p class="text-red-500">Failed to get insight. Please try again.</p>';
            }
        } catch (error) {
            injuryInsightOutput.innerHTML = `<p class="text-red-500">An error occurred: ${error.message}</p>`;
        } finally {
            getInjuryInsightBtn.disabled = false;
        }
    });

    // LLM Integration for Smart Warm-up/Cool-down
    getWorkoutSuggestionBtn.addEventListener('click', async () => {
        const currentWorkoutContent = workoutDisplay.innerHTML;
        if (!currentWorkoutContent || currentWorkoutContent.includes('Select a day')) {
            workoutSuggestionOutput.innerHTML = '<p class="text-red-500">Please select a day to view your workout first.</p>';
            workoutSuggestionOutput.classList.remove('hidden');
            return;
        }

        getWorkoutSuggestionBtn.disabled = true;
        workoutSuggestionOutput.classList.remove('hidden');
        workoutSuggestionOutput.innerHTML = '<p class="text-center text-gray-500">Generating routines...</p>';

        try {
            const prompt = `Given the following workout for today: ${currentWorkoutContent.replace(/<[^>]*>/g, '')}. Suggest a concise warm-up routine (3-5 exercises) and a concise cool-down routine (3-5 stretches) relevant to these exercises. Format as two bulleted lists, clearly labeled "Warm-up:" and "Cool-down:". Avoid medical advice. Keep it concise, around 150-200 words.`;
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
            const result = await response.json();

            if (result.candidates && result.candidates.length > 0 &&
                result.candidates[0].content && result.candidates[0].content.parts &&
                result.candidates[0].content.parts.length > 0) {
                const text = result.candidates[0].content.parts[0].text;
                workoutSuggestionOutput.innerHTML = `<p>${text.replace(/\n/g, '<br>')}</p>`;
            } else {
                workoutSuggestionOutput.innerHTML = '<p class="text-red-500">Failed to generate routines. Please try again.</p>';
            }
        } catch (error) {
            workoutSuggestionOutput.innerHTML = `<p class="text-red-500">An error occurred: ${error.message}</p>`;
        } finally {
            getWorkoutSuggestionBtn.disabled = false;
        }
    });
    
    renderWorkout();
});
</script>

</body>
</html>
